xStrata Inscription Protocol

Contract: u64bxr-v9.2.17
Standard: SIP-009 (NFT compatible)
Network: Stacks (Bitcoin L2)

Overview

xStrata is an on-chain inscription and data-layer protocol built on Stacks.

It enables users to inscribe arbitrarily large datasets (HTML, JSON, audio, code, media, or structured binary data) directly on-chain in a cheap, resumable, and immutable way, while remaining fully compatible with SIP-009 wallets and indexers.

The protocol is designed to be:

Append-only

Immutable once sealed

Composable via recursion

Predictable in cost

Minimal in governance

Safe for long-term archival use

Once an inscription is sealed, nothing about it can ever change.

Core Design Principles
1. Immutability by construction

Inscription content cannot be edited after sealing.

No mutable pointers, annotations, or “latest version” fields exist.

History is never rewritten — meaning emerges only by adding new inscriptions.

2. Creator provenance is permanent

Each inscription records:

creator (original uploader, immutable)

owner (transferable via SIP-009)

Ownership can change, provenance cannot.

3. Cheap, resumable uploads

Data is uploaded in chunks (up to 16KB per chunk).

Upload sessions are resumable indefinitely.

Users never need to re-upload or re-pay if interrupted.

4. Explicit composition via recursion

Inscriptions can reference other inscriptions as dependencies.

Dependencies must already exist at seal time.

No forward references are allowed.

This ensures all dependency graphs are immediately resolvable.

5. Minimal admin power

Admin authority is intentionally narrow and cannot affect user content.

Admin can:

Adjust protocol fee rate (within strict bounds)

Set royalty recipient

Pause/unpause inscription writes

Transfer admin ownership

Admin cannot:

Modify or delete inscriptions

Change metadata

Alter dependencies

Freeze transfers

Rewrite history

Lifecycle of an Inscription
1. Begin (or Resume) Inscription
(begin-inscription file-hash mime-type total-size total-chunks)


Creates a new upload session or resumes an existing one

Session is keyed by { uploader, file-hash }

Begin fee is charged once only

Repeated calls with the same parameters act as resume

There is no expiry on upload sessions.

2. Upload Data Chunks
(add-chunk-batch file-hash (list-of-chunks))


Uploads up to 50 chunks per transaction

Chunks are indexed sequentially

Enforced invariants:

No empty batches

No overflow beyond declared total-chunks

Hash is recomputed incrementally

Chunks are stored under:

{ file-hash, creator, chunk-index }


This prevents cross-user overwrites.

3. (Optional) Abandon Upload
(abandon-upload file-hash)


Uploader-only

Clears upload session state

Does not delete chunks

Not required for correctness

Useful if a user wants to restart cleanly.

4. Seal Inscription
(seal-inscription file-hash token-uri)


Seal requirements:

All declared chunks uploaded

Final hash matches declared hash

Token URI is non-empty

On success:

NFT is minted

Metadata is written

UploadState is removed

Inscription becomes immutable

5. Recursive Seal (Optional)
(seal-recursive file-hash token-uri dependencies)


Additional rules:

All dependency IDs must already exist

No forward references allowed

Dependencies are recorded after a successful seal.

Fee Model
Single “Fee Unit” Design

The protocol uses one pricing knob (fee-unit) to keep economics simple and predictable.

Current Defaults

fee-unit: 0.1 STX

Absolute bounds:

Minimum: 0.001 STX

Maximum: 1.0 STX

Fees Charged
Action	Fee
Begin inscription	fee-unit
Seal inscription	fee-unit × (1 + number-of-batches)

Where:

number-of-batches = ceil(total-chunks / 50)


This ensures:

Small inscriptions remain cheap

Large inscriptions scale fairly

No artificial size limits

Governance Constraints

Admin fee changes are strictly bounded:

Cannot exceed absolute min/max

Cannot increase more than 2× in one update

Cannot decrease more than 10× in one update

This prevents sudden or abusive fee changes.

Pause Behaviour

The protocol includes a pause switch for safety.

When paused:

❌ begin-inscription blocked

❌ add-chunk-batch blocked

❌ sealing blocked

When paused:

✅ transfers still allowed

✅ read-only access unaffected

✅ recursive reads by other contracts unaffected

Pause exists solely to prevent users wasting fees during emergencies.

SIP-009 Compatibility

The contract fully implements the SIP-009 NFT trait.

Supported functions include:

get-token-uri

get-owner

transfer

get-last-token-id

get-next-token-id

This ensures compatibility with:

Wallets

Marketplaces

Indexers

NFT explorers

Read-Only Helpers
Metadata & Content

get-inscription-meta

get-chunk

get-dependencies

get-upload-state

get-pending-chunk

SVG Helpers (optional visual identity)

get-svg

get-svg-data-uri

Admin / Status

get-admin

get-royalty-recipient

get-fee-unit

is-paused

Guarantees & Invariants

The protocol guarantees:

No inscription can be altered once sealed

Creator provenance is immutable

Dependencies are always resolvable

Uploads are resumable indefinitely

Transfers are never frozen

History is append-only

Costs are predictable before committing

Non-Goals (By Design)

xStrata intentionally does not include:

Mutable metadata

“Latest version” pointers

On-chain annotations

Admin curation

Burning or re-minting

Automatic cleanup or expiry

Forward dependency references

These are left to:

recursion

off-chain indexing

optional external registries

Philosophy

“Inscribed means final.”

xStrata treats the blockchain as a permanent substrate for meaningful data, not just ownership records.

All interpretation, evolution, and composition happens by adding new inscriptions, never by rewriting old ones.

Versioning

u64bxr-v9.2.17 represents a locked-in core design.

Future work should:

build on top of this contract

use recursion or separate helper contracts

avoid modifying this core behaviour

License & Usage

This contract is intended as open infrastructure.

Users are free to:

inscribe data

build recursive systems

index and render inscriptions

create tools, wallets, and explorers

Subject to applicable network fees.
